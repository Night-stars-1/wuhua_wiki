import{_ as nt}from"./image-viewer-COUBEuQb.js";import{a8 as rt,d as $,s as I,o as P,b as g,c as T,w as v,e as _,g as w,t as b,k as A,f as j,F as z,r as R,m as G,E as X,p as V,q as U,_ as J,l as Q,n as st,h as Y,x as ct,a9 as it,aa as ot,O as lt}from"./index-yWpFPNlM.js";/* empty css            */import{b as dt,_ as ut}from"./wuhua-Do0OCrVE.js";var ft=Symbol("cache-parser");function B(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function k(t){return(typeof t=="string"||typeof t=="number")&&(t=Number(t))>=0&&t<1/0}function S(t){return t===!0||typeof t=="number"||typeof t=="string"&&t!=="false"}var x=Number;function Z(t){var e=Object.defineProperty({},ft,{enumerable:!1,value:1});if(!t||typeof t!="string")return e;var a=function(o){for(var d,m={},u=function(h,at){var E=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(E)return(E=E.call(h)).next.bind(E);if(Array.isArray(h)||(E=function(C,q){if(C){if(typeof C=="string")return B(C,q);var O=Object.prototype.toString.call(C).slice(8,-1);return O==="Object"&&C.constructor&&(O=C.constructor.name),O==="Map"||O==="Set"?Array.from(C):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?B(C,q):void 0}}(h))){E&&(h=E);var F=0;return function(){return F>=h.length?{done:!0}:{done:!1,value:h[F++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(o.toLowerCase().replace(/\s+/g,"").split(","));!(d=u()).done;){var y,f=d.value.split("=",2);m[f[0]]=(y=f[1])==null||y}return m}(t),s=a["max-age"],n=a["max-stale"],r=a["min-fresh"],i=a["s-maxage"],c=a["stale-if-error"],l=a["stale-while-revalidate"];return S(a.immutable)&&(e.immutable=!0),k(s)&&(e.maxAge=x(s)),k(n)&&(e.maxStale=x(n)),k(r)&&(e.minFresh=x(r)),S(a["must-revalidate"])&&(e.mustRevalidate=!0),S(a["must-understand"])&&(e.mustUnderstand=!0),S(a["no-cache"])&&(e.noCache=!0),S(a["no-store"])&&(e.noStore=!0),S(a["no-transform"])&&(e.noTransform=!0),S(a["only-if-cached"])&&(e.onlyIfCached=!0),S(a.private)&&(e.private=!0),S(a["proxy-revalidate"])&&(e.proxyRevalidate=!0),S(a.public)&&(e.public=!0),k(i)&&(e.sMaxAge=x(i)),k(c)&&(e.staleIfError=x(c)),k(l)&&(e.staleWhileRevalidate=x(l)),e}var ht=Symbol();function pt(){var t,e,a=new Promise(function(s,n){t=s,e=n});return a.resolve=t,a.reject=e,a[ht]=1,a}function mt(t,e){return t>e?1:-1}function L(t,e){var a=5381;if(typeof t=="object"&&t!==null&&(t.toString===Object.prototype.toString||t.toString===Array.prototype.toString)){e||(e=new WeakSet);for(var s=Object.keys(t).sort(mt),n=0;n<s.length;n++){var r=s[n],i=t[r];if(a=33*a^L(r,e),typeof i=="object"&&i!==null&&(t.toString===Object.prototype.toString||t.toString===Array.prototype.toString)){if(e.has(i))continue;e.add(i)}a=33*a^L(i,e)}return 33*a^L(t.constructor,e)}var c=typeof t;try{t instanceof Date?c+=t.getTime():c+=String(t)}catch{c+=String(Object.assign({},t))}for(var l=0;l<c.length;l++)a=33*a^c.charCodeAt(l);return a}/*!
 * Axios Cache Interceptor 1.5.3
 * (c) 2021-present Arthur Fiorette & Contributors
 * Released under the MIT License.
 */const p=Object.freeze({IfModifiedSince:"if-modified-since",LastModified:"last-modified",IfNoneMatch:"if-none-match",CacheControl:"cache-control",Pragma:"pragma",ETag:"etag",Expires:"expires",Age:"age",XAxiosCacheEtag:"x-axios-cache-etag",XAxiosCacheLastModified:"x-axios-cache-last-modified",XAxiosCacheStaleIfError:"x-axios-cache-stale-if-error"}),yt=t=>{if(!t)return"not enough headers";const e=t[p.CacheControl];if(e){const{noCache:s,noStore:n,maxAge:r,maxStale:i,immutable:c,staleWhileRevalidate:l}=Z(String(e));if(s||n)return"dont cache";if(c)return{cache:1e3*60*60*24*365};if(r!==void 0){const o=t[p.Age];return{cache:o?(r-Number(o))*1e3:r*1e3,stale:i!==void 0?i*1e3:l!==void 0?l*1e3:void 0}}}const a=t[p.Expires];if(a){const s=Date.parse(String(a))-Date.now();return s>=0?{cache:s}:"dont cache"}return"not enough headers"};function D(){return D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},D.apply(this,arguments)}function _t(t){return t?e=>t(e)||e===304:e=>e>=200&&e<300||e===304}function W(t="get",e=[]){return t=t.toLowerCase(),e.some(a=>a===t)}function gt(t,e){e.headers||(e.headers={});const{etag:a,modifiedSince:s}=e.cache;if(a){var n;const r=a===!0?(n=t.data)==null?void 0:n.headers[p.ETag]:a;r&&(e.headers[p.IfNoneMatch]=r)}s&&(e.headers[p.IfModifiedSince]=s===!0?t.data.headers[p.LastModified]||new Date(t.createdAt).toUTCString():s.toUTCString())}function vt(t,e){return t.status===304&&e?(t.cached=!0,t.data=e.data,t.status=e.status,t.statusText=e.statusText,t.headers=D({},e.headers,t.headers),e):{data:t.data,status:t.status,statusText:t.statusText,headers:t.headers}}function wt(t){const e=async a=>{if(a.id=t.generateKey(a),a.cache===!1)return a;if(a.cache=D({},t.defaults.cache,a.cache),typeof a.cache.cachePredicate=="object"&&a.cache.cachePredicate.ignoreUrls&&a.url){for(const h of a.cache.cachePredicate.ignoreUrls)if(h instanceof RegExp?(h.lastIndex=0,h.test(a.url)):a.url.includes(h))return a}if(a.cache.cacheTakeover){var s,n,r,i,c,l,o,d,m;(r=(s=a.headers)[n=p.CacheControl])!=null||(s[n]="no-cache"),(l=(i=a.headers)[c=p.Pragma])!=null||(i[c]="no-cache"),(m=(o=a.headers)[d=p.Expires])!=null||(o[d]="0")}if(!W(a.method,a.cache.methods))return a;let u=await t.storage.get(a.id,a);const y=a.cache.override;t:if(u.state==="empty"||u.state==="stale"||u.state==="must-revalidate"||y){if(t.waiting[a.id]&&!y&&(u=await t.storage.get(a.id,a),u.state!=="empty"&&u.state!=="must-revalidate"))break t;return t.waiting[a.id]=pt(),t.waiting[a.id].catch(()=>{}),await t.storage.set(a.id,{state:"loading",previous:y?u.data?"stale":"empty":u.state,data:u.data,createdAt:y&&!u.createdAt?Date.now():u.createdAt},a),(u.state==="stale"||u.state==="must-revalidate")&&gt(u,a),a.validateStatus=_t(a.validateStatus),(u.state==="stale"||u.data&&u.state!=="must-revalidate")&&await(a.cache.hydrate==null?void 0:a.cache.hydrate(u)),a}let f;if(u.state==="loading"){const h=t.waiting[a.id];if(!h)return u.data&&await(a.cache.hydrate==null?void 0:a.cache.hydrate(u)),a;try{f=await h}catch{return u.data&&await(a.cache.hydrate==null?void 0:a.cache.hydrate(u)),e(a)}}else f=u.data;return a.transformResponse=void 0,a.adapter=function(){return Promise.resolve({config:a,data:f.data,headers:f.headers,status:f.status,statusText:f.statusText,cached:!0,id:a.id})},a};return{onFulfilled:e,apply:()=>t.interceptors.request.use(e)}}async function St(t,e){if(typeof e=="function")return e(t);const{statusCheck:a,responseMatch:s,containsHeaders:n}=e;if(a&&!await a(t.status)||s&&!await s(t))return!1;if(n)for(const[i,c]of Object.entries(n)){var r;if(!await c((r=t.headers[i.toLowerCase()])!=null?r:t.headers[i]))return!1}return!0}async function bt(t,e,a){if(typeof a=="function")return a(e);for(const[s,n]of Object.entries(a)){if(n==="delete"){await t.remove(s,e.config);continue}const r=await t.get(s,e.config);if(r.state==="loading")continue;const i=await n(r,e);if(i==="delete"){await t.remove(s,e.config);continue}i!=="ignore"&&await t.set(s,i,e.config)}}function Ct(t){const e=async(n,r)=>{var i;await t.storage.remove(n,r),(i=t.waiting[n])==null||i.reject(),delete t.waiting[n]},a=async n=>{var r;if(!(n!=null&&n.config))throw n;n.id=n.config.id,(r=n.cached)!=null||(n.cached=!1);const i=n.config,c=i.cache;if(n.cached)return n;if(!c)return n.cached=!1,n;if(c.update&&await bt(t.storage,n,c.update),!W(i.method,c.methods))return n;const l=await t.storage.get(n.id,i);if(l.state!=="loading")return n;if(!l.data&&!await St(n,c.cachePredicate))return await e(n.id,i),n;for(const f of Object.keys(n.headers))f.startsWith("x-axios-cache")&&delete n.headers[f];c.etag&&c.etag!==!0&&(n.headers[p.XAxiosCacheEtag]=c.etag),c.modifiedSince&&(n.headers[p.XAxiosCacheLastModified]=c.modifiedSince===!0?"use-cache-timestamp":c.modifiedSince.toUTCString());let o=c.ttl||-1,d;if(c.interpretHeader){const f=t.headerInterpreter(n.headers);if(f==="dont cache")return await e(n.id,i),n;f!=="not enough headers"&&(typeof f=="number"?o=f:(o=f.cache,d=f.stale))}const m=vt(n,l.data);typeof o=="function"&&(o=await o(n)),c.staleIfError&&(n.headers[p.XAxiosCacheStaleIfError]=String(o));const u={state:"cached",ttl:o,staleTtl:d,createdAt:Date.now(),data:m},y=t.waiting[n.id];return y&&(y.resolve(u.data),delete t.waiting[n.id]),await t.storage.set(n.id,u,i),n},s=async n=>{if(!n.isAxiosError||!n.config)throw n;const r=n.config,i=r.id,c=r.cache,l=n.response;if(!c||!i)throw n;if(!W(r.method,c.methods))throw await e(i,r),n;const o=await t.storage.get(i,r);if(o.state!=="loading"||o.previous!=="stale")throw await e(i,r),n;if(c.staleIfError){const m=String(l==null?void 0:l.headers[p.CacheControl]),u=m&&Z(m).staleIfError,y=typeof c.staleIfError=="function"?await c.staleIfError(l,o,n):c.staleIfError===!0&&u?u*1e3:c.staleIfError;if(y===!0||typeof y=="number"&&o.createdAt+y>Date.now()){var d;return(d=t.waiting[i])==null||d.resolve(o.data),delete t.waiting[i],await t.storage.set(i,{state:"stale",createdAt:Date.now(),data:o.data},r),{cached:!0,config:r,id:i,data:o.data.data,headers:o.data.headers,status:o.data.status,statusText:o.data.statusText}}}throw await e(i,r),n};return{onFulfilled:a,onRejected:s,apply:()=>t.interceptors.response.use(a,s)}}const It=t=>!!t&&!!t["is-storage"];function tt(t){const e=t.data.headers;return p.ETag in e||p.LastModified in e||p.XAxiosCacheEtag in e||p.XAxiosCacheLastModified in e}function Et(t){return String(t.data.headers[p.CacheControl]).includes("must-revalidate")}function K(t){return tt(t)?!0:t.state==="cached"&&t.staleTtl!==void 0&&Math.abs(Date.now()-(t.createdAt+t.ttl))<=t.staleTtl}function M(t){return t.ttl!==void 0&&t.createdAt+t.ttl<=Date.now()}function et({set:t,find:e,remove:a}){return{"is-storage":1,set:t,remove:a,get:async(s,n)=>{let r=await e(s,n);if(!r)return{state:"empty"};if(r.state==="empty"||r.state==="loading"||r.state==="must-revalidate")return r;if(r.state==="cached"){if(!M(r))return r;if(!K(r))return await a(s,n),{state:"empty"};if(r={state:"stale",createdAt:r.createdAt,data:r.data,ttl:r.staleTtl!==void 0?r.staleTtl+r.ttl:void 0},await t(s,r,n),Et(r))return D({},r,{state:"must-revalidate"})}return!M(r)||tt(r)?r:(await a(s,n),{state:"empty"})}}}function jt(t=!1,e=!1,a=!1){const s=et({set:(n,r)=>{if(a){let i=Object.keys(s.data);if(i.length>=a)for(s.cleanup(),i=Object.keys(s.data);i.length>=a;)delete s.data[i.shift()]}s.data[n]=t==="double"?typeof structuredClone=="function"?structuredClone(r):JSON.parse(JSON.stringify(r)):r},remove:n=>{delete s.data[n]},find:n=>{const r=s.data[n];return t&&r!==void 0?typeof structuredClone=="function"?structuredClone(r):JSON.parse(JSON.stringify(r)):r}});return s.data=Object.create(null),s.cleanup=()=>{const n=Object.keys(s.data);let r=-1,i,c;for(;++r<n.length;){if(c=n[r],i=s.data[c],i.state==="empty"){s.remove(c);continue}i.state==="cached"&&M(i)&&!K(i)&&s.remove(c)}},e&&(s.cleaner=setInterval(s.cleanup,e)),s}const H=/^\/|\/$/g;function At(t){return e=>{if(e.id)return e.id;const a=t(e);return typeof a=="string"||typeof a=="number"?`${a}`:`${L(a)}`}}const Ot=At(({baseURL:t,url:e,method:a,params:s,data:n})=>(t!==void 0?t=t.replace(H,""):t="",e!==void 0?e=e.replace(H,""):e="",a!==void 0?a=a.toLowerCase():a="get",{url:t+(t&&e?"/":"")+e,params:s,method:a,data:n}));function kt(t,e={}){var a,s,n,r,i,c,l,o;const d=t;if(d.defaults.cache)throw new Error("setupCache() should be called only once");if(d.storage=e.storage||jt(),!It(d.storage))throw new Error("Use buildStorage() function");return d.waiting=e.waiting||{},d.generateKey=e.generateKey||Ot,d.headerInterpreter=e.headerInterpreter||yt,d.requestInterceptor=e.requestInterceptor||wt(d),d.responseInterceptor=e.responseInterceptor||Ct(d),d.debug=e.debug||function(){},d.defaults.cache={update:e.update||{},ttl:(a=e.ttl)!=null?a:1e3*60*5,methods:e.methods||["get","head"],cachePredicate:e.cachePredicate||{statusCheck:m=>[200,203,300,301,302,404,405,410,414,501].includes(m)},etag:(s=e.etag)!=null?s:!0,modifiedSince:(n=e.modifiedSince)!=null?n:e.etag===!1,interpretHeader:(r=e.interpretHeader)!=null?r:!0,cacheTakeover:(i=e.cacheTakeover)!=null?i:!0,staleIfError:(c=e.staleIfError)!=null?c:!0,override:(l=e.override)!=null?l:!1,hydrate:(o=e.hydrate)!=null?o:void 0},d.requestInterceptor.apply(),d.responseInterceptor.apply(),d}function xt(t,e="axios-cache-"){return et({find:a=>{const s=t.getItem(e+a);return s?JSON.parse(s):void 0},remove:a=>{t.removeItem(e+a)},set:(a,s)=>{const n=()=>t.setItem(e+a,JSON.stringify(s));try{return n()}catch{const i=Object.entries(t).filter(c=>c[0].startsWith(e)).map(c=>[c[0],JSON.parse(c[1])]);for(const c of i)c[1].state==="cached"&&M(c[1])&&!K(c[1])&&t.removeItem(c[0]);try{return n()}catch{const l=i.sort((o,d)=>(o[1].createdAt||0)-(d[1].createdAt||0));for(const o of l){t.removeItem(o[0]);try{return n()}catch{}}}t.removeItem(e+a)}}})}const Tt=rt.create(),N=kt(Tt,{storage:xt(localStorage,"axios-cache:"),ttl:1e3*60*5});async function Dt(t){return(await N.get("charinfo/weapon.json")).data[t]}async function $t(t){return(await N.get(`additionals/${t}.json`)).data}async function Nt(t){return(await N.get("charinfo/id2name.json")).data[t]}async function Lt(t){return(await N.get("charinfo/style.json")).data[t]}const Mt={class:"image-container"},Pt=$({__name:"CharInfoWeapon",props:{data:{}},setup(t){const e=t,a=I({name:"",rare:0}),s=I([]);return P(async()=>{e.data.id&&(a.value=await Dt(e.data.id),e.data.additional.forEach(async n=>{const r=await $t(n.id),i=r.attrs[a.value.rare];s.value.push({name:r.name,count:`${i.init+i.grow*n.level}${r.type}`})}))}),(n,r)=>{const i=X,c=V,l=U;return n.data.id?(g(),T(l,{key:0,class:"weapoon-card","body-style":"display: flex;gap: 10px;flex-direction: column;"},{default:v(()=>[_(c,{justify:"space-between"},{default:v(()=>[w("div",Mt,[_(i,{class:"image",src:`/weapons/${n.data.id}.png`,lazy:""},null,8,["src"]),w("span",null,b(A(a).name),1)]),w("span",null,"Lv "+b(n.data.level),1)]),_:1}),(g(!0),j(z,null,R(A(s),o=>(g(),T(c,{justify:"space-between"},{default:v(()=>[w("span",null,b(o.name),1),w("span",null,b(o.count),1)]),_:2},1024))),256))]),_:1})):G("",!0)}}}),zt=J(Pt,[["__scopeId","data-v-5f55e08b"]]);async function Rt(t){return(await N.get("skill/skill2icon.json")).data[t]}const Jt={class:"skill"},Wt={class:"image-container"},Xt=$({__name:"CharInfoSkill",props:{id:{},data:{}},setup(t){const e=t,a=I({});return P(async()=>{e.data.forEach(async s=>{const n=await Rt(s.id);a.value[s.id]={icon:n,level:s.level}})}),(s,n)=>{const r=X,i=st,c=Y;return g(),j("div",Jt,[_(c,{wrap:"",size:"default",style:{"justify-content":"center"}},{default:v(()=>[(g(!0),j(z,null,R(A(a),l=>(g(),j("div",Wt,[_(r,{class:"image",src:`/char/${s.id}/skill/${l.icon}.png`,lazy:""},null,8,["src"]),_(i,{size:"small",class:"level"},{default:v(()=>[Q(b(l.level),1)]),_:2},1024)]))),256))]),_:1})])}}}),Vt=J(Xt,[["__scopeId","data-v-a1ca8f74"]]),Kt=$({__name:"StyleProgress",props:{data:{}},setup(t){const e=t,a=I({data:{}});return P(async()=>{const s=e.data.id,n=e.data.points,r=await Lt(s);a.value.name=r.name,n.forEach((i,c)=>{i&&(a.value.data[r.sector[c]]=i)})}),(s,n)=>{const r=ct,i=it,c=V;return g(!0),j(z,null,R(A(a).data,(l,o)=>(g(),T(c,null,{default:v(()=>[_(r,{md:4},{default:v(()=>[Q(b(o)+": ",1)]),_:2},1024),_(r,{md:20},{default:v(()=>[_(i,{"text-inside":!0,"stroke-width":20,percentage:l/7*100,color:"rgb(224 207 165)"},{default:v(()=>[w("span",null,b(l),1)]),_:2},1032,["percentage"])]),_:2},1024)]),_:2},1024))),256)}}}),Ft={class:"image-container"},qt={class:"image-container"},Bt=$({__name:"CharInfoCard",props:{id:{},data:{}},setup(t){const e=t,a=I("");return P(async()=>{a.value=await Nt(e.id)}),(s,n)=>{const r=X,i=V,c=Kt,l=Vt,o=zt,d=U;return g(),T(d,{class:"card","body-style":"display: flex;gap: 10px;flex-direction: column;"},{default:v(()=>[_(i,{justify:"space-between"},{default:v(()=>[w("div",Ft,[_(r,{class:"image",src:`/char/${s.id}/avatar.png`,lazy:""},null,8,["src"]),w("span",null,b(A(a)),1)]),w("div",qt,[w("span",null,"Lv "+b(s.data.level),1)])]),_:1}),_(c,{data:s.data.style},null,8,["data"]),_(l,{id:s.id,data:s.data.skills},null,8,["id","data"]),_(o,{data:s.data.weapon},null,8,["data"])]),_:1})}}}),Ht=J(Bt,[["__scopeId","data-v-48936b4d"]]),Gt={class:"login-card"},Ut=$({__name:"CharInfo",setup(t){const e=localStorage.getItem("cardInfo"),a=e?I(JSON.parse(e)):I({}),s=I({});function n(c){const l=Object.entries(c);return l.sort((d,m)=>m[1].level-d[1].level),Object.fromEntries(l)}async function r(c,l){const o=await dt(c,l),d=n(o);Object.keys(d).length!==0&&(localStorage.setItem("cardInfo",JSON.stringify(d)),a.value=d)}function i(c){s.value[c]=!0}return(c,l)=>{const o=ut,d=Ht,m=Y,u=nt,y=ot("lazy");return g(),T(u,{class:"charinfo-panel"},{default:v(()=>[w("div",Gt,[_(o,{"card-style":"border-radius: 10px;",onCheck:r})]),_(m,{fill:"",wrap:"","fill-ratio":20,direction:"horizontal",alignment:"stretch",class:"info-space"},{default:v(()=>[(g(!0),j(z,null,R(A(a),(f,h)=>lt((g(),j("div",{class:"lazy",key:h,onLazyLoad:i},[A(s)[h]?(g(),T(d,{key:0,id:h.toString(),data:f},null,8,["id","data"])):G("",!0)],32)),[[y]])),128))]),_:1})]),_:1})}}}),ee=J(Ut,[["__scopeId","data-v-f2f35476"]]);export{ee as default};
